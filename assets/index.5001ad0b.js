import{R as e,C as t,a as n,G as r,T as a,B as o,H as l,b as c,V as i,c as s,i as u,d as m,e as d,f,g,h as b,j as h,k as p,l as E,m as w}from"./vendor.eeeab54c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let y,_=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});_.decode();let v=null;function x(){return null!==v&&v.buffer===y.memory.buffer||(v=new Uint8Array(y.memory.buffer)),v}function C(e,t){return _.decode(x().subarray(e,e+t))}const k=new Array(32).fill(void 0);k.push(void 0,null,!0,!1);let A=k.length;function S(e){A===k.length&&k.push(k.length+1);const t=A;return A=k[t],k[t]=e,t}function I(e){return k[e]}function R(e){const t=I(e);return function(e){e<36||(k[e]=A,A=e)}(e),t}let W=null;function T(){return null!==W&&W.buffer===y.memory.buffer||(W=new Uint32Array(y.memory.buffer)),W}let F=0;let B=32;function M(e,t){try{var n=function(e,t){const n=t(4*e.length);return T().set(e,n/4),F=e.length,n}(e,y.__wbindgen_malloc),r=F;y.run(n,r,function(e){if(1==B)throw new Error("out of js stack");return k[--B]=e,B}(t))}finally{k[B++]=void 0}}let L=new TextEncoder("utf-8");const z="function"==typeof L.encodeInto?function(e,t){return L.encodeInto(e,t)}:function(e,t){const n=L.encode(e);return t.set(n),{read:e.length,written:n.length}};function O(e,t,n){if(void 0===n){const n=L.encode(e),r=t(n.length);return x().subarray(r,r+n.length).set(n),F=n.length,r}let r=e.length,a=t(r);const o=x();let l=0;for(;l<r;l++){const t=e.charCodeAt(l);if(t>127)break;o[a+l]=t}if(l!==r){0!==l&&(e=e.slice(l)),a=n(a,r,r=l+3*e.length);const t=x().subarray(a+l,a+r);l+=z(e,t).written}return F=l,a}let U=null;function j(){return null!==U&&U.buffer===y.memory.buffer||(U=new Int32Array(y.memory.buffer)),U}function D(e){try{const i=y.__wbindgen_add_to_stack_pointer(-16);var t=O(e,y.__wbindgen_malloc,y.__wbindgen_realloc),n=F;y.sourceCodeGen(i,t,n);var r=j()[i/4+0],a=j()[i/4+1],o=(l=r,c=a,T().subarray(l/4,l/4+c)).slice();return y.__wbindgen_free(r,4*a),o}finally{y.__wbindgen_add_to_stack_pointer(16)}var l,c}function K(e,t){try{return e.apply(this,t)}catch(n){y.__wbindgen_exn_store(S(n))}}async function N(e){void 0===e&&(e=new URL("/koala/assets/koala_wasm_bg.63eabb86.wasm",window.location));const t={wbg:{}};t.wbg.__wbindgen_string_new=function(e,t){return S(C(e,t))},t.wbg.__wbindgen_object_drop_ref=function(e){R(e)},t.wbg.__wbg_call_346669c262382ad7=function(){return K((function(e,t,n){return S(I(e).call(I(t),I(n)))}),arguments)},t.wbg.__wbindgen_throw=function(e,t){throw new Error(C(e,t))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return y=n.exports,N.__wbindgen_wasm_module=r,y}var V,q;function J(){const E=e.useRef("print(2+5)"),[w,_]=e.useState(""),v=e.useRef(new Uint32Array),[x,k]=e.useState(""),[A,S]=e.useState(V.open);e.useEffect((()=>{N();let e;!function t(){S((n=>n==V.open?(clearInterval(e),e=setTimeout(t,200),V.closed):(clearInterval(e),e=setTimeout(t,1e3*(6*Math.random()+2)),V.open)))}()}),[]);const I=e=>k((t=>t+e));return e.createElement("div",{className:"dosis-font"},e.createElement(t,{paddingX:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"xl",bg:"white",maxWidth:"container.lg",padding:"2rem",shadow:"2xl"},e.createElement(r,{gap:"5",templateColumns:{md:"1fr 4fr"}},e.createElement(t,{fontSize:"5xl",fontWeight:"bold"},e.createElement(r,{gridRow:"2"},e.createElement(a,null,"Koala."),e.createElement(a,{color:"gray.500"},A))),e.createElement(r,{gap:"5",templateRows:"auto 1fr"},e.createElement(o,{paddingX:"5"},e.createElement(t,null,e.createElement(a,{fontSize:"md",textAlign:"left"},"Koala is a simple programming language that runs on a stack-based virtual machine created for educational and demonastrative purposes.",e.createElement("br",null),e.createElement("br",null),"This project was inspired by cross-platform languages such as Java and C#, which are facilitated through VMs the Java Virtual Machine (JVM) and .NET Core.",e.createElement("br",null),e.createElement("br",null),"The library is written completely in Rust ðŸ¦€, so it has been compiled to WebAssembly for this demo!"))),e.createElement(t,null,e.createElement(l,null,e.createElement(c,{as:"a",href:"https://github.com/ndbaker1/koala",target:"_blank",leftIcon:e.createElement(i,null)},"Source Code"),e.createElement(c,{leftIcon:e.createElement(s,null),onClick:()=>{G("#editor")}},"Try It Out"))))))),e.createElement(t,{id:"editor",padding:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"xl",bg:"white",maxW:"container.lg",padding:"1rem",shadow:"2xl"},e.createElement(o,{paddingBottom:"1rem"},e.createElement(a,{fontSize:"xl"},"Write Koala"),e.createElement(u,{height:"32rem",language:"python",value:E.current,onChange:e=>{E.current=e||""},options:{fontFamily:'"Consolas"'}})),e.createElement(r,null,e.createElement(c,{onClick:()=>{try{_(function(e){try{const o=y.__wbindgen_add_to_stack_pointer(-16);var t=O(e,y.__wbindgen_malloc,y.__wbindgen_realloc),n=F;y.parseAst(o,t,n);var r=j()[o/4+0],a=j()[o/4+1];return C(r,a)}finally{y.__wbindgen_add_to_stack_pointer(16),y.__wbindgen_free(r,a)}}(E.current)),v.current=D(E.current),k(""),M(v.current,I),G("#output")}catch(e){alert("encountered a not yet handled grammar error!")}}},"Compile & Run")))),e.createElement(t,{id:"output",padding:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"md",bg:"white",maxWidth:"container.lg",padding:"1rem",shadow:"2xl"},e.createElement(r,{gridTemplateRows:"repeat(2,1fr)",height:"32rem"},e.createElement(m,null,e.createElement(d,null,e.createElement(f,null,"Info"),e.createElement(f,null,"Syntax Tree"),e.createElement(f,null,"Instructions (Hex)")),e.createElement(g,null,e.createElement(b,null,e.createElement(o,{textAlign:"left",overflow:"auto",overscrollBehavior:"contain",height:350},e.createElement(o,{fontSize:"md",maxWidth:"xl"},x?e.createElement(e.Fragment,null,"One of the local Koalas has generously compiled and run our code!",e.createElement("br",null),e.createElement("br",null),'Â  Â  Â  Â  Â  Â  Â ðŸ’¬Â  " ',x,' "',e.createElement("br",null),e.createElement(o,{textAlign:"left",fontSize:"xl"},e.createElement(a,{color:"gray.500",fontSize:"2xl"},"Ê• â€¢á´¥â€¢Ê”")),e.createElement("br",null),"This is the output of our program, but you can also view the ",e.createElement("b",null,"Syntax Tree")," generated by the Language parser, and the corresponding 32bit ",e.createElement("b",null,"Instructions")," (in hex) that are run by the Koala Virtual Machine."):e.createElement(e.Fragment,null,"Compile a Program!",e.createElement(a,{color:"gray.500",fontSize:"2xl"},"Ê• â€¢á´¥â€¢Ê”"))))),e.createElement(b,null,e.createElement(o,{textAlign:"left",overflow:"auto",overscrollBehavior:"contain",height:350},e.createElement(h,{src:JSON.parse(w||"{}")}))),e.createElement(b,null,e.createElement(o,{textAlign:"left",overflow:"auto",overscrollBehavior:"contain",height:350,fontFamily:"consolas"},v.current.reduce(((e,t)=>e.concat(["0x"+t.toString(16).padStart(8,"0").toUpperCase()])),[]).map(((t,n)=>e.createElement("p",{key:n},t))))))),e.createElement("hr",null),e.createElement(o,{display:"flex",alignItems:"end"},e.createElement(o,{display:"flex",flexDirection:"column"},e.createElement(c,{maxWidth:"min",leftIcon:e.createElement(p,null),onClick:()=>{G("#editor")}},"Go Back and Edit")))))))}function G(e){var t;null==(t=document.querySelector(e))||t.scrollIntoView({behavior:"smooth"})}(q=V||(V={})).open="Ê• â€¢á´¥â€¢Ê”",q.closed="Ê• -á´¥-Ê”";class P{constructor(e,t){this.name=e,this.colors=t}setCurrent(){Object.entries(this.colors).forEach((([e,t])=>{document.documentElement.style.setProperty("--"+e,t)}))}static refresh(){H[0].setCurrent()}}const H=[new P("dark",{"bg-color":"#2B2D42","bg-gradient1":"#7332ba","bg-gradient2":"#573280","text-color":"#8D99AE","text-color-hover":"#D90429","button-text-color":"white","button-bg-color":"#EF233C","button-bg-color-hover":"#D90429"}),new P("beige-purple",{"bg-color":"#EFF8E2","bg-gradient1":"#EFF8E2","bg-gradient2":"#CECFC7","text-color":"#23022E","text-color-hover":"#573280","button-text-color":"#EFF8E2","button-bg-color":"#573280","button-bg-color-hover":"#23022E"})];H[0].setCurrent(),E.render(e.createElement(e.StrictMode,null,e.createElement(w,null,e.createElement(J,null))),document.getElementById("root"));
