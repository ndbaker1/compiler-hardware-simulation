import{R as e,C as t,a as n,G as r,T as a,B as o,H as l,b as c,V as i,c as s,d as u,e as m,f as d,g as f,h as g,i as b,j as h,k as p,l as E,m as w,n as y}from"./vendor.f3db297d.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();let _,v=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});v.decode();let x=null;function S(){return null!==x&&x.buffer===_.memory.buffer||(x=new Uint8Array(_.memory.buffer)),x}function C(e,t){return v.decode(S().subarray(e,e+t))}const k=new Array(32).fill(void 0);k.push(void 0,null,!0,!1);let A=k.length;function I(e){A===k.length&&k.push(k.length+1);const t=A;return A=k[t],k[t]=e,t}function R(e){return k[e]}function W(e){const t=R(e);return function(e){e<36||(k[e]=A,A=e)}(e),t}let F=null;function B(){return null!==F&&F.buffer===_.memory.buffer||(F=new Uint32Array(_.memory.buffer)),F}let T=0;let L=32;function D(e,t){try{var n=function(e,t){const n=t(4*e.length);return B().set(e,n/4),T=e.length,n}(e,_.__wbindgen_malloc),r=T;_.run(n,r,function(e){if(1==L)throw new Error("out of js stack");return k[--L]=e,L}(t))}finally{k[L++]=void 0}}let M=new TextEncoder("utf-8");const O="function"==typeof M.encodeInto?function(e,t){return M.encodeInto(e,t)}:function(e,t){const n=M.encode(e);return t.set(n),{read:e.length,written:n.length}};function z(e,t,n){if(void 0===n){const n=M.encode(e),r=t(n.length);return S().subarray(r,r+n.length).set(n),T=n.length,r}let r=e.length,a=t(r);const o=S();let l=0;for(;l<r;l++){const t=e.charCodeAt(l);if(t>127)break;o[a+l]=t}if(l!==r){0!==l&&(e=e.slice(l)),a=n(a,r,r=l+3*e.length);const t=S().subarray(a+l,a+r);l+=O(e,t).written}return T=l,a}let U=null;function j(){return null!==U&&U.buffer===_.memory.buffer||(U=new Int32Array(_.memory.buffer)),U}function K(e){try{const i=_.__wbindgen_add_to_stack_pointer(-16);var t=z(e,_.__wbindgen_malloc,_.__wbindgen_realloc),n=T;_.sourceCodeGen(i,t,n);var r=j()[i/4+0],a=j()[i/4+1],o=(l=r,c=a,B().subarray(l/4,l/4+c)).slice();return _.__wbindgen_free(r,4*a),o}finally{_.__wbindgen_add_to_stack_pointer(16)}var l,c}function q(e,t){try{return e.apply(this,t)}catch(n){_.__wbindgen_exn_store(I(n))}}async function N(e){void 0===e&&(e=new URL("/koala/assets/koala_wasm_bg.93e7125f.wasm",window.location));const t={wbg:{}};t.wbg.__wbindgen_string_new=function(e,t){return I(C(e,t))},t.wbg.__wbindgen_object_drop_ref=function(e){W(e)},t.wbg.__wbg_call_346669c262382ad7=function(){return q((function(e,t,n){return I(R(e).call(R(t),R(n)))}),arguments)},t.wbg.__wbindgen_throw=function(e,t){throw new Error(C(e,t))},("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await async function(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(n){if("application/wasm"==e.headers.get("Content-Type"))throw n;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n)}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,t)}{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}(await e,t);return _=n.exports,N.__wbindgen_wasm_module=r,_}var G,P;function V(){e.useEffect((()=>{N(),W()}),[]);const w=e.useRef("fn main() {\n  fact(5)\n}\n\nfn fact(n) {\n  print(n)\n  if n {\n    fact((n-1))\n  }\n}"),[y,v]=e.useState(""),x=e.useRef(new Uint32Array),[S,k]=e.useState(""),A=e=>k((t=>t+e)),[I,R]=e.useState(G.open),W=()=>{let e;!function t(){R((n=>n==G.open?(clearInterval(e),e=setTimeout(t,200),G.closed):(clearInterval(e),e=setTimeout(t,1e3*(5*Math.random()+2)),G.open)))}()};return e.createElement("div",{className:"dosis-font"},e.createElement(t,{paddingX:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"xl",bg:"white",maxWidth:"container.lg",padding:"2rem",shadow:"2xl"},e.createElement(r,{gap:"5",templateColumns:{md:"1fr 3fr"}},e.createElement(t,{fontSize:"5xl",fontWeight:"bold"},e.createElement(r,{gridRow:"2"},e.createElement(a,null,"Koala."),e.createElement(a,{color:"gray.500"},I))),e.createElement(r,{gap:"5",templateRows:"auto 1fr"},e.createElement(o,{paddingX:"2"},e.createElement(t,null,e.createElement(a,{fontSize:"md",textAlign:"left"},"🐨 Koala is a simple programming language that runs on a stack-based virtual machine.",e.createElement("br",null),"It was created as a proof-of-concept while studying compiler design and hardware virtualization.",e.createElement("br",null),e.createElement("br",null),"Because the entire library is written using Rust 🦀, the compiler and runtime can be ported here using WebAssembly!"))),e.createElement(t,null,e.createElement(l,null,e.createElement(c,{as:"a",href:"https://github.com/ndbaker1/koala",target:"_blank",leftIcon:e.createElement(i,null)},"More on Github"),e.createElement(c,{leftIcon:e.createElement(s,null),onClick:()=>{H("#editor")}},"Try It Out"))))))),e.createElement(t,{id:"editor",padding:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"xl",bg:"white",maxW:"container.lg",padding:"1rem",shadow:"2xl"},e.createElement(u,null,e.createElement(m,null,e.createElement(d,null,"Write Code"),e.createElement(d,null,"Language Docs")),e.createElement(f,null,e.createElement(g,null,e.createElement(o,{paddingBottom:"1rem"},e.createElement(b,{height:"28rem",language:"python",value:w.current,onChange:e=>{w.current=e||""},options:{fontFamily:'"Consolas"'}})),e.createElement(r,null,e.createElement(c,{onClick:()=>{let e;try{e="parsing",v(function(e){try{const o=_.__wbindgen_add_to_stack_pointer(-16);var t=z(e,_.__wbindgen_malloc,_.__wbindgen_realloc),n=T;_.parseAst(o,t,n);var r=j()[o/4+0],a=j()[o/4+1];return C(r,a)}finally{_.__wbindgen_add_to_stack_pointer(16),_.__wbindgen_free(r,a)}}(w.current)),e="code generation",x.current=K(w.current),k(""),e="execution",D(x.current,A),H("#output")}catch(t){alert("encountered error in "+e+" stage:\n"+t)}}},"Compile & Run"))),e.createElement(g,null,e.createElement(o,{paddingBottom:"1rem",height:"28rem"},"Docs")))))),e.createElement(t,{id:"output",padding:"2rem",height:"100vh"},e.createElement(n,{borderRadius:"md",bg:"white",maxWidth:"container.lg",padding:"1rem",shadow:"2xl"},e.createElement(u,null,e.createElement(m,null,e.createElement(d,null,"Info"),e.createElement(d,null,"Syntax Tree"),e.createElement(d,null,"Instructions (Hex)")),e.createElement(f,null,e.createElement(g,null,e.createElement(o,{textAlign:"left",overflow:"auto",overscrollBehavior:"contain",height:"28rem"},e.createElement(o,{fontSize:"md",maxWidth:"xl"},S?e.createElement(e.Fragment,null,"One of the local Koalas has generously compiled and run our code!",e.createElement("br",null),e.createElement("br",null),e.createElement(r,{gap:"2",gridTemplateColumns:"min-content auto"},e.createElement(o,{textAlign:"left",fontSize:"xl",width:"min-content"},e.createElement(a,{whiteSpace:"nowrap"},"           💬"),e.createElement(a,{color:"gray.500",fontSize:"2xl",whiteSpace:"nowrap"},G.open)),e.createElement(h,{value:S})),e.createElement("br",null),"This is the output of our program, but you can also view the ",e.createElement("b",null,"Syntax Tree")," generated by the Language parser, and the corresponding 32bit ",e.createElement("b",null,"Instructions")," (in hex) that are run by the Koala Virtual Machine."):e.createElement(e.Fragment,null,"Compile a Program!",e.createElement(a,{color:"gray.500",fontSize:"2xl",whiteSpace:"nowrap"},G.open))))),e.createElement(g,null,e.createElement(o,{textAlign:"left",overflow:"auto",overscrollBehavior:"contain",height:"28rem"},e.createElement(p,{src:JSON.parse(y||"{}"),indentWidth:2,enableClipboard:!1,displayDataTypes:!1,quotesOnKeys:!1}))),e.createElement(g,null,e.createElement(h,{overflow:"auto",overscrollBehavior:"contain",height:"28rem",fontFamily:"monospace",value:x.current.reduce(((e,t)=>e.concat(["0x"+t.toString(16).padStart(8,"0").toUpperCase()])),[]).map(((e,t)=>t.toString().padStart(4," ")+"│"+e)).join("\n")})))),e.createElement(r,null,e.createElement(c,{leftIcon:e.createElement(E,null),onClick:()=>{H("#editor")}},"Go Back and Edit")))))}function H(e){var t;null==(t=document.querySelector(e))||t.scrollIntoView({behavior:"smooth"})}(P=G||(G={})).open="ʕ •ᴥ•ʔ",P.closed="ʕ -ᴥ-ʔ";class X{constructor(e,t){this.name=e,this.colors=t}setCurrent(){Object.entries(this.colors).forEach((([e,t])=>{document.documentElement.style.setProperty("--"+e,t)}))}static refresh(){J[0].setCurrent()}}const J=[new X("dark",{"bg-color":"#2B2D42","bg-gradient1":"#7332ba","bg-gradient2":"#573280","text-color":"#8D99AE","text-color-hover":"#D90429","button-text-color":"white","button-bg-color":"#EF233C","button-bg-color-hover":"#D90429"}),new X("beige-purple",{"bg-color":"#EFF8E2","bg-gradient1":"#EFF8E2","bg-gradient2":"#CECFC7","text-color":"#23022E","text-color-hover":"#573280","button-text-color":"#EFF8E2","button-bg-color":"#573280","button-bg-color-hover":"#23022E"})];J[0].setCurrent(),w.render(e.createElement(e.StrictMode,null,e.createElement(y,null,e.createElement(V,null))),document.getElementById("root"));
